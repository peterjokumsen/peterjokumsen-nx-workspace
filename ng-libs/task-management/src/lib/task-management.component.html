@defer {
  <mat-toolbar>
    <strong>{{ currentContext() }} Tasks</strong>
    <span class="spacer"></span>
    <button mat-flat-button [matMenuTriggerFor]="filterMenu">
      <mat-icon>tune</mat-icon> Filters
    </button>

    <mat-menu #filterMenu="matMenu">
      <button mat-menu-item [matMenuTriggerFor]="contextMenu">Context</button>
      <button mat-menu-item [matMenuTriggerFor]="statusMenu">Status</button>
    </mat-menu>

    <mat-menu #contextMenu="matMenu">
      @for (context of contexts$ | async; track context.value) {
        <button
          mat-menu-item
          (click)="onFilterChange('context', context.value)"
        >
          {{ context.label }}
        </button>
      }
    </mat-menu>

    <mat-menu #statusMenu="matMenu">
      @for (status of statuses$ | async; track status.value) {
        <button mat-menu-item (click)="onFilterChange('status', status.value)">
          {{ status.label }}
        </button>
      }
    </mat-menu>
  </mat-toolbar>
} @placeholder {
  <h2>{{ currentContext() }} Tasks</h2>
}

<div class="page-container">
  <router-outlet></router-outlet>

  <pj-loading-indicator></pj-loading-indicator>
</div>
