@mixin set-variables($map) {
  $primary-keys: 'primary-bg-color', 'primary-color';
  $theme-keys: 'bg-color', 'color', 'accent-bg-color', 'accent-color',
    'error-bg-color', 'error-color';
  $required-keys: join($primary-keys, $theme-keys);

  @each $required-key in $primary-keys {
    @if not map-has-key($map, $required-key) {
      @error "Key `#{$required-key}` is missing in the map.";
    }
  }

  @each $key, $value in $map {
    --#{$key}: #{$value};
  }
}

@mixin set-colors-and-opacity($bg-color, $color) {
  color: $color;
  background-color: $bg-color;
  border-color: $color;

  &.bg-opacity-70 {
    --pj-bg-opacity: 0.7;
  }

  &.bg-opacity-50 {
    --pj-bg-opacity: 0.5;
  }
}

@mixin set-colors($bg-color, $color) {
  color: $color;
  background-color: $bg-color;
}

@mixin color-button($bg-color, $color) {
  background-color: $bg-color;
  border-color: $color;
  color: $color;

  &:hover {
    background-color: $color;
    border-color: $bg-color;
    color: $bg-color;
  }
}

@mixin declare-color-classes(
  $bg-color,
  $color,
  $main-bg-color,
  $main-text-color,
  $accent-bg-color,
  $accent-text-color,
  $error-bg-color,
  $error-text-color
) {
  body {
    background-color: $bg-color;
  }

  .primary-colors {
    --pj-bg-opacity: 1;

    @include set-colors-and-opacity(
      rgba(
        red($bg-color),
        green($bg-color),
        blue($bg-color),
        var(--pj-bg-opacity)
      ),
      $color
    );
  }

  .main-colors {
    --pj-bg-opacity: 1;

    @include set-colors-and-opacity(
      rgba(
        red($main-bg-color),
        green($main-bg-color),
        blue($main-bg-color),
        var(--pj-bg-opacity)
      ),
      $main-text-color
    );
  }

  .accent-colors {
    --pj-bg-opacity: 1;

    @include set-colors-and-opacity(
      rgba(
        red($accent-bg-color),
        green($accent-bg-color),
        blue($accent-bg-color),
        var(--pj-bg-opacity)
      ),
      $accent-text-color
    );
  }

  .error-colors {
    --pj-bg-opacity: 1;

    @include set-colors-and-opacity(
      rgba(
        red($error-bg-color),
        green($error-bg-color),
        blue($error-bg-color),
        var(--pj-bg-opacity)
      ),
      $error-text-color
    );
  }

  .pj-button {
    &.primary {
      @include color-button($bg-color, $color);
    }

    &.main {
      @include color-button($main-bg-color, $main-text-color);
    }

    &.accent {
      @include color-button($accent-bg-color, $accent-text-color);
    }

    &.danger {
      @include color-button($error-bg-color, $error-text-color);
    }
  }
}

@mixin declare-block-classes(
  $bg-color,
  $color,
  $main-bg-color,
  $main-text-color,
  $accent-bg-color,
  $accent-text-color,
  $error-bg-color,
  $error-text-color
) {
  .primary-block {
    @include set-colors($bg-color, $color);
  }

  .main-block {
    @include set-colors($main-bg-color, $main-text-color);
  }

  .accent-block {
    @include set-colors($accent-bg-color, $accent-text-color);
  }

  .error-block {
    @include set-colors($error-bg-color, $error-text-color);
  }
}
